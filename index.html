<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>AI Prompt Generator untuk Fotografi & Seni | Buat Prompt Canggih</title>
    <meta name="description" content="Generator prompt AI canggih untuk fotografi, seni digital, dan Midjourney. Buat prompt sinematik dan artistik dengan mudah menggunakan fitur Ideasi Cepat dan Optimasi Prompt.">
    <meta name="keywords" content="AI prompt generator, generator prompt AI, fotografi AI, seni digital, Midjourney prompt, rekayasa prompt, prompt engineering, alat bantu AI, generator prompt dwibahasa">
    
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="AI Prompt Generator untuk Fotografi & Seni | Buat Prompt Canggih">
    <meta property="og:description" content="Generator prompt AI canggih untuk fotografi, seni digital, dan Midjourney. Buat prompt sinematik dan artistik dengan mudah menggunakan fitur Ideasi Cepat dan Optimasi Prompt.">
    <meta property="og:image" content="https://placehold.co/1200x630/1d232a/ffffff?text=AI+Prompt+Generator">
    <meta property="og:url" content="https://putra.ommu.id/veo3-prompt-generator/">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AI Prompt Generator untuk Fotografi & Seni | Buat Prompt Canggih">
    <meta name="twitter:description" content="Generator prompt AI canggih untuk fotografi, seni digital, dan Midjourney. Buat prompt sinematik dan artistik dengan mudah menggunakan fitur Ideasi Cepat dan Optimasi Prompt.">
    <meta name="twitter:image" content="https://placehold.co/1200x630/1d232a/ffffff?text=AI+Prompt+Generator">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .custom-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%239CA3AF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 0.7em;
        }
    </style>
    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
</head>
<body class="bg-slate-100 text-slate-800 flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl bg-white border border-slate-200 rounded-2xl shadow-lg p-6 md:p-10 animate-fade-in flex-grow">
        
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-teal-600 tracking-tight">AI Prompt Generator</h1>
            <p class="text-slate-500 mt-2 text-base">Dibuat oleh ahli fotografi & prompt engineering</p>
        </div>

        <div class="space-y-8">
            <div class="p-6 rounded-lg border transition-all duration-300 bg-yellow-50 border-yellow-200">
                <div class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-yellow-700 border-yellow-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.37-2.371A6 6 0 0115 7zm-5.629 1.371a6 6 0 015.258-5.258" />
                    </svg>
                    Kunci API Gemini
                </div>
                <input type="password" id="gemini-api-key" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-yellow-300 text-yellow-900 focus:ring-yellow-500/50 focus:border-yellow-500" placeholder="Masukkan Kunci API Gemini Anda di sini...">
                <p class="text-xs text-slate-500 mt-2">Diperlukan untuk fitur "Ideasi Cepat" & "Optimalkan". Kunci API Anda tidak disimpan. Dapatkan dari <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Google AI Studio</a>.</p>
            </div>
             <div class="p-6 rounded-lg border transition-all duration-300 bg-green-50 border-green-200">
                <div class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-green-700 border-green-200">
                    <svg class="w-6 h-6 mr-3 text-green-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M9 2.221V7.779a1 1 0 0 1-1.36.93l-3.03-1.635a1 1 0 0 1 0-1.86l3.03-1.635A1 1 0 0 1 9 2.221Zm10.154 5.4a1 1 0 0 1-1.36.93l-3.03-1.635a1 1 0 0 1 0-1.86l3.03-1.635a1 1 0 0 1 1.36.93v3.87Zm-2.69 4.316a1 1 0 0 1-1.36.93l-3.03-1.635a1 1 0 0 1 0-1.86l3.03-1.635a1 1 0 0 1 1.36.93v3.87Zm-3.464 4.316a1 1 0 0 1-1.36.93l-3.03-1.635a1 1 0 0 1 0-1.86l3.03-1.635a1 1 0 0 1 1.36.93v3.87Zm-4.341-1.684a1 1 0 0 0-1-1H3a1 1 0 1 0 0 2h3.319a1 1 0 0 0 1-1Zm1-4.017a1 1 0 0 0-1-1H3a1 1 0 1 0 0 2h6.319a1 1 0 0 0 1-1Zm1-4.017a1 1 0 0 0-1-1H3a1 1 0 1 0 0 2h9.319a1 1 0 0 0 1-1Z" clip-rule="evenodd"/>
                    </svg>
                    Integrasi Google Sheets (Opsional)
                </div>
                <div class="space-y-4">
                     <div>
                        <label for="google-client-id" class="block text-sm font-medium mb-2 text-green-600">Client ID Google</label>
                        <input type="password" id="google-client-id" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-green-300 text-green-900 focus:ring-green-500/50 focus:border-green-500" placeholder="Masukkan Client ID Anda dari Google Cloud Console">
                     </div>
                     <div>
                        <label for="spreadsheet-url" class="block text-sm font-medium mb-2 text-green-600">URL Google Sheet</label>
                        <input type="text" id="spreadsheet-url" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-green-300 text-green-900 focus:ring-green-500/50 focus:border-green-500" placeholder="Contoh: https://docs.google.com/spreadsheets/d/...">
                     </div>
                     <div class="flex items-center space-x-4">
                         <button id="connect-g-sheets-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all duration-300 disabled:bg-green-400">
                            Hubungkan ke Google
                         </button>
                         <div id="g-sheets-status" class="text-sm text-slate-500">Status: Belum terhubung</div>
                     </div>
                </div>
                <p class="text-xs text-slate-500 mt-2">Data dari "Prompt Final" akan disimpan ke sheet Anda setiap kali optimasi berhasil.</p>
            </div>
            
            <div class="p-6 rounded-lg border transition-all duration-300 bg-sky-50 border-sky-200">
                <div class="flex justify-between items-center mb-4 border-b pb-3 border-sky-200">
                    <div class="flex items-center text-lg font-semibold text-sky-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" /></svg>
                        Latar Belakang
                    </div>
                </div>
                <div class="relative">
                     <textarea id="overall-desc" rows="3" class="form-field w-full border-2 rounded-lg py-2 px-4 pr-32 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-sky-300 text-sky-900 focus:ring-sky-500/50 focus:border-sky-500" placeholder="Tulis ide awal Anda di sini, lalu klik 'Ideasi Cepat' untuk mengembangkannya..."></textarea>
                     <button id="ideate-btn" title="Ideasi Cepat" class="absolute top-2.5 right-2.5 flex items-center bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed px-3 py-1.5 text-sm font-semibold">
                        <span id="ideate-icon" class="mr-1.5">âœ¨</span>
                        <span id="ideate-btn-text">Ideasi Cepat</span>
                        <svg id="ideate-loader" class="animate-spin h-4 w-4 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                </div>
            </div>

            <div class="p-6 rounded-lg border transition-all duration-300 bg-orange-50 border-orange-200">
                <div class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-orange-700 border-orange-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l-1-1m6-3l-2-2" /></svg>
                    Suasana
                </div>
                <textarea id="scene" rows="3" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-orange-300 text-orange-900 focus:ring-orange-500/50 focus:border-orange-500" placeholder="Contoh: di kafe remang-remang dengan cahaya hangat, di hutan ajaib berkabut dengan sinar bulan menembus pepohonan"></textarea>
            </div>

            <div class="p-6 rounded-lg border transition-all duration-300 bg-emerald-50 border-emerald-200">
                <div class="flex justify-between items-center mb-4 border-b pb-3 text-emerald-700 border-emerald-200">
                    <h3 class="flex items-center text-lg font-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                        Detail Subjek & Aksi (Karakter)
                    </h3>
                    <button id="add-character-btn" class="text-xs font-semibold bg-emerald-200 text-emerald-800 hover:bg-emerald-300 px-3 py-1 rounded-full transition-colors">+ Tambah Karakter</button>
                </div>
                <div id="character-container" class="space-y-6">
                    <!-- Character Block will be inserted here -->
                </div>
            </div>

            <div class="p-6 rounded-lg border transition-all duration-300 bg-red-50 border-red-200">
                <div class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-red-700 border-red-200">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                    Detail Tambahan
                </div>
                <input type="text" id="details" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-red-300 text-red-900 focus:ring-red-500/50 focus:border-red-500" placeholder="Instruksi spesifik lainnya...">
            </div>

             <div class="p-6 rounded-lg border transition-all duration-300 bg-purple-50 border-purple-200">
                 <h3 class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-purple-700 border-purple-200 mb-5">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                    Detail Fotografi
                 </h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6 pt-2">
                     <div>
                        <label for="style" class="block text-sm font-medium mb-2 text-purple-600">Gaya & Estetika</label>
                        <select id="style" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-purple-300 text-purple-900 focus:ring-purple-500/50 focus:border-purple-500">
                            <option value="">-- Pilih Gaya --</option>
                            <option value="photorealistic">Fotografi Realistis</option>
                            <option value="cinematic still">Sinematik</option>
                            <option value="street photography">Fotografi Jalanan</option>
                            <option value="epic landscape photography">Pemandangan Epik</option>
                            <option value="studio portrait">Potret Studio</option>
                            <option value="vintage film photo">Foto Film Vintage</option>
                            <option value="black and white photography">Hitam Putih Dramatis</option>
                            <option value="surrealism">Surealisme</option>
                        </select>
                    </div>
                    <div>
                        <label for="shot-style" class="block text-sm font-medium mb-2 text-purple-600">Gaya Bidikan</label>
                        <select id="shot-style" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-purple-300 text-purple-900 focus:ring-purple-500/50 focus:border-purple-500">
                            <option value="">-- Pilih Gaya Bidikan --</option>
                            <option value="extreme long shot">Extreme Long Shot (Bidikan Sangat Jauh)</option>
                            <option value="long shot">Long Shot (Bidikan Jauh)</option>
                            <option value="full shot">Full Shot (Bidikan Penuh)</option>
                            <option value="medium long shot">Medium Long Shot (Bidikan Menengah Jauh)</option>
                            <option value="medium Shot">Medium Shot (Bidikan Menengah)</option>
                            <option value="medium close-Up">Medium Close-Up (Bidikan Dekat Menengah)</option>
                            <option value="close-up">Close-Up (Bidikan Dekat)</option>
                            <option value="extreme close-Up">Extreme Close-Up (Bidikan Sangat Dekat)</option>
                        </select>
                    </div>
                    <div>
                        <label for="camera-angle" class="block text-sm font-medium mb-2 text-purple-600">Sudut Kamera</label>
                        <select id="camera-angle" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-purple-300 text-purple-900 focus:ring-purple-500/50 focus:border-purple-500">
                            <option value="">-- Pilih Sudut Kamera --</option>
                            <option value="low angle">Low Angle (Sudut Rendah)</option>
                            <option value="high angle">High Angle (Sudut Tinggi)</option>
                            <option value="eye Level">Eye Level (Setinggi Mata)</option>
                            <option value="dutch angle">Dutch Angle (Sudut Belanda)</option>
                            <option value="bird's eye view">Bird's Eye View (Pandangan Mata Burung)</option>
                            <option value="worm's eye view">Worm's Eye View (Pandangan Mata Cacing)</option>
                            <option value="point of view">Point of View (Sudut Pandang)</option>
                        </select>
                    </div>
                    <div>
                        <label for="focus" class="block text-sm font-medium mb-2 text-purple-600">Fokus</label>
                        <select id="focus" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-purple-300 text-purple-900 focus:ring-purple-500/50 focus:border-purple-500">
                            <option value="">-- Pilih Fokus --</option>
                            <option value="shallow focus">Shallow Focus (Fokus Dangkal / Bokeh)</option>
                            <option value="sharp focus">Sharp Focus (Fokus Tajam)</option>
                            <option value="soft focus">Soft Focus (Fokus Lembut)</option>
                            <option value="deep Focus">Deep Focus (Fokus Dalam)</option>
                        </select>
                    </div>
                    <div>
                        <label for="lighting" class="block text-sm font-medium mb-2 text-purple-600">Pencahayaan</label>
                        <select id="lighting" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-purple-300 text-purple-900 focus:ring-purple-500/50 focus:border-purple-500">
                            <option value="">-- Pilih Pencahayaan --</option>
                            <option value="golden hour lighting">Golden Hour (Senja/Pagi)</option>
                            <option value="dramatic lighting, hard shadows">Cahaya Dramatis, Bayangan Tajam</option>
                            <option value="soft window light">Cahaya Jendela Lembut</option>
                            <option value="neon lighting, vibrant colors">Lampu Neon, Warna-warni</option>
                            <option value="moody, low-key lighting">Moody, Gelap</option>
                            <option value="backlit silhouette">Siluet (Backlit)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="p-6 rounded-lg border transition-all duration-300 bg-pink-50 border-pink-200">
                 <h3 class="flex items-center text-lg font-semibold mb-4 border-b pb-3 text-pink-700 border-pink-200 mb-5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                    Pengaturan Teknis
                 </h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6 pt-2">
                    <div>
                        <label for="camera" class="block text-sm font-medium mb-2 text-pink-600">Kamera & Lensa</label>
                        <select id="camera" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-pink-300 text-pink-900 focus:ring-pink-500/50 focus:border-pink-500">
                            <option value="">-- Pilih Kamera/Lensa --</option>
                            <option value="shot on DSLR, 50mm f/1.8 lens">DSLR, Lensa 50mm f/1.8</option>
                            <option value="shot on analog film, Kodak Portra 400, film grain">Film Analog (Kodak Portra 400)</option>
                            <option value="telephoto lens, compressed background">Lensa Telefoto</option>
                            <option value="shot on iPhone, candid style">Gaya Candid (iPhone)</option>
                            <option value="drone shot, aerial view">Drone (Aerial View)</option>
                        </select>
                    </div>
                    <div>
                        <label for="resolution" class="block text-sm font-medium mb-2 text-pink-600">Resolusi & Format</label>
                        <select id="resolution" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 custom-select bg-white border-pink-300 text-pink-900 focus:ring-pink-500/50 focus:border-pink-500">
                            <option value="">-- Pilih Resolusi --</option>
                            <option value="--ar 16:9">Rasio Aspek 16:9</option>
                            <option value="--ar 9:16">Rasio Aspek 9:16</option>
                            <option value="--ar 1:1">Rasio Aspek 1:1 (Persegi)</option>
                            <option value="--ar 4:3">Rasio Aspek 4:3 (Klasik)</option>
                        </select>
                    </div>
                 </div>
            </div>
        </div>

        <div class="flex flex-col md:flex-row justify-center items-center md:space-x-4 space-y-4 md:space-y-0 mt-10 mb-6">
            <button id="clear-btn" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-3 px-8 rounded-full text-base transform hover:scale-105 transition-all duration-300 hidden w-full md:w-auto">
                Hapus Isian
            </button>
            <button id="generate-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-base shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 w-full md:w-auto">
                Buat Prompt!
            </button>
            <button id="optimize-btn" title="Optimalkan Prompt" class="flex items-center justify-center bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-8 rounded-full text-base shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 hidden w-full md:w-auto">
                <svg id="optimize-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span id="optimize-btn-text">Optimalkan</span>
                <svg id="optimize-loader" class="animate-spin h-5 w-5 mr-2 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
            </button>
        </div>
        <p id="api-key-error" class="text-center text-red-500 text-sm mt-2 hidden">Harap masukkan Kunci API Gemini Anda.</p>

        <!-- Results Section -->
        <div id="results-container" class="mt-10 hidden w-full">
            <!-- Tabs -->
            <div class="border-b border-slate-200">
                <nav class="-mb-px flex space-x-2 md:space-x-6" aria-label="Tabs">
                    <button id="tab-original" type="button" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Prompt Asli
                    </button>
                    <button id="tab-optimized" type="button" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm hidden">
                        Versi Optimasi
                    </button>
                    <button id="tab-suggestion" type="button" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm hidden">
                        Saran Kreatif
                    </button>
                    <button id="tab-final" type="button" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm hidden">
                        Prompt Final
                    </button>
                </nav>
            </div>

            <!-- Panels -->
            <div class="py-6">
                <!-- Panel 1: Original -->
                <div id="panel-original" class="tab-panel animate-fade-in">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="prompt-output-id" class="block text-sm font-medium text-slate-600">Bahasa Indonesia</label>
                                <button id="copy-btn-id" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="prompt-output-id" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="prompt-output-en" class="block text-sm font-medium text-slate-600">Bahasa Inggris (untuk AI)</label>
                                <button id="copy-btn-en" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="prompt-output-en" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Panel 2: Optimized -->
                <div id="panel-optimized" class="tab-panel hidden animate-fade-in">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="optimized-output-id" class="block text-sm font-medium text-slate-600">Bahasa Indonesia</label>
                                <button id="copy-optimized-btn-id" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="optimized-output-id" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="optimized-output-en" class="block text-sm font-medium text-slate-600">Bahasa Inggris (untuk AI)</label>
                                <button id="copy-optimized-btn-en" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="optimized-output-en" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                    </div>
                    <div class="mt-6">
                        <div class="flex justify-between items-center mb-2">
                            <label for="optimized-content-hashtag" class="block text-sm font-medium text-slate-600">Konten & Hashtag</label>
                            <button id="copy-optimized-content-btn" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                        </div>
                        <textarea id="optimized-content-hashtag" class="w-full h-60 bg-white border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-teal-500/50 focus:border-teal-500" placeholder="Konten dan hashtag yang di-generate akan muncul di sini..."></textarea>
                    </div>
                </div>
                
                <!-- Panel 3: Suggestion -->
                <div id="panel-suggestion" class="tab-panel hidden animate-fade-in">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="creative-suggestion-id" class="block text-sm font-medium text-slate-600">Bahasa Indonesia</label>
                                <button id="copy-creative-suggestion-id" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="creative-suggestion-id" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="creative-suggestion-en" class="block text-sm font-medium text-slate-600">Bahasa Inggris (untuk AI)</label>
                                <button id="copy-creative-suggestion-en" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="creative-suggestion-en" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Panel 4: Final -->
                <div id="panel-final" class="tab-panel hidden animate-fade-in">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="final-prompt-id" class="block text-sm font-medium text-slate-600">Bahasa Indonesia</label>
                                <button id="copy-final-prompt-id" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="final-prompt-id" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="final-prompt-en" class="block text-sm font-medium text-slate-600">Bahasa Inggris (untuk AI)</label>
                                <button id="copy-final-prompt-en" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                            </div>
                            <textarea id="final-prompt-en" readonly class="w-full h-60 bg-slate-100 border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none"></textarea>
                        </div>
                    </div>
                    <div class="mt-6">
                        <div class="flex justify-between items-center mb-2">
                            <label for="final-content-hashtag" class="block text-sm font-medium text-slate-600">Konten & Hashtag</label>
                            <button id="copy-final-content-btn" class="bg-slate-200 hover:bg-slate-300 text-slate-600 font-semibold py-1 px-3 rounded-md text-xs transition-colors">Salin</button>
                        </div>
                        <textarea id="final-content-hashtag" class="w-full h-60 bg-white border border-slate-300 rounded-lg p-4 text-slate-700 font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-teal-500/50 focus:border-teal-500" placeholder="Konten dan hashtag yang di-generate akan muncul di sini..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="text-center py-8 px-4 text-slate-500">
        <p class="text-sm">
            &copy; <span id="copyright-year"></span> AI Prompt Generator. by <a href="https://putra.ommu.id" target="_blank" class="font-semibold text-teal-600 hover:underline">Putra Sudaryanto</a>
        </p>
        <div class="flex justify-center items-center space-x-6 mt-4">
            <a href="https://www.facebook.com/sudaryanto.putra" class="hover:text-teal-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                </svg>
            </a>
            <a href="https://www.instagram.com/putra.sudaryanto" class="hover:text-teal-600 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm0 1.442c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.282.24.705.275 1.486.039.843.047 1.096.047 3.232s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598c-.28-.28-.453-.546-.598-.92-.11-.28-.24-.705-.276-1.485C1.44 10.39 1.442 10.147 1.442 8s.002-2.39.047-3.232c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.843-.039 1.096-.047 3.232-.047zM8 3.882a4.108 4.108 0 1 0 0 8.216 4.108 4.108 0 0 0 0-8.216zm0 6.762a2.652 2.652 0 1 1 0-5.304 2.652 2.652 0 0 1 0 5.304zm4.965-6.402a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92z"/>
                </svg>
            </a>
            <a href="https://www.linkedin.com/in/putrasudaryanto" class="hover:text-teal-600 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm2.45 2.15v9.51h2.1V4.3H2.45zm1.066-1.252a1.252 1.252 0 1 1 0 2.504 1.252 1.252 0 0 1 0-2.504M6.936 4.3v9.51h2.1V9.35c0-1.22.4-2.52 1.84-2.52 1.4 0 1.54 1.1 1.54 2.52v4.86h2.1V9.25c0-2.22-.8-3.9-3.1-3.9-1.4 0-2.2.8-2.5 1.5V4.3H6.936z"/>
                </svg>
            </a>
             <a href="http://putra.ommu.id" class="hover:text-teal-600 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.146 6.146a.5.5 0 0 0 .708 0L8 2.854l3.146 3.292a.5.5 0 1 0 .708-.708l-3.5-3.667a.5.5 0 0 0-.708 0l-3.5 3.667a.5.5 0 0 0 0 .708m3.147 6.694a.5.5 0 0 0-.708 0L4 13.146l-3.146-3.292a.5.5 0 0 0-.708.708l3.5 3.667a.5.5 0 0 0 .708 0l3.5-3.667a.5.5 0 0 0 0-.708zM10.854 6.146a.5.5 0 0 0-.708 0L7 9.293l-1.146-1.147a.5.5 0 1 0-.708.708L6.293 10l-1.147 1.146a.5.5 0 0 0 .708.708L7 10.707l1.146 1.147a.5.5 0 0 0 .708-.708L7.707 10l1.147-1.146a.5.5 0 0 0 0-.708z"/>
                </svg>
            </a>
             <a href="https://github.com/PutraSudaryanto" class="hover:text-teal-600 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                </svg>
            </a>
            <a href="https://api.whatsapp.com/send/?phone=628112540432&text&text=Hai,.." class="hover:text-teal-600 transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.358 0 7.92-3.562 7.921-7.928a7.8 7.8 0 0 0-2.328-5.633M7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/>
                </svg>
            </a>
        </div>
    </footer>

    <script>
        const generateBtn = document.getElementById('generate-btn');
        const clearBtn = document.getElementById('clear-btn');
        const resultsContainer = document.getElementById('results-container');
        const formFields = Array.from(document.querySelectorAll('.form-field'));
        const ideateBtn = document.getElementById('ideate-btn');
        const overallDescEl = document.getElementById('overall-desc');
        const optimizeBtn = document.getElementById('optimize-btn');
        const geminiApiKeyEl = document.getElementById('gemini-api-key');
        const apiKeyError = document.getElementById('api-key-error');
        const addCharacterBtn = document.getElementById('add-character-btn');
        const characterContainer = document.getElementById('character-container');
        let characterCount = 0;
        
        // Google Sheets Integration
        const connectGSheetsBtn = document.getElementById('connect-g-sheets-btn');
        const gSheetsStatus = document.getElementById('g-sheets-status');
        const googleClientIdEl = document.getElementById('google-client-id');
        const spreadsheetUrlEl = document.getElementById('spreadsheet-url');

        let tokenClient;
        let gapiInited = false;
        let gisInited = false;
        let isGoogleAuthConnected = false;

        const DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];
        const SCOPES = "https://www.googleapis.com/auth/spreadsheets";

        function gapiLoaded() {
            gapi.load('client', initializeGapiClient);
        }

        async function initializeGapiClient() {
            const apiKey = geminiApiKeyEl.value.trim();
             if (!apiKey) {
                gSheetsStatus.textContent = 'Status: Kunci API Gemini diperlukan.';
                gSheetsStatus.classList.remove('text-slate-500');
                gSheetsStatus.classList.add('text-red-500');
                return;
            }
            await gapi.client.init({
                apiKey: apiKey,
                discoveryDocs: DISCOVERY_DOCS,
            });
            gapiInited = true;
            checkGisGapiReady();
        }

        function gisLoaded() {
            const clientId = googleClientIdEl.value.trim();
             if (!clientId) {
                gSheetsStatus.textContent = 'Status: Client ID Google diperlukan.';
                gSheetsStatus.classList.remove('text-slate-500');
                gSheetsStatus.classList.add('text-red-500');
                return;
            }
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: clientId,
                scope: SCOPES,
                callback: (tokenResponse) => {
                     if (tokenResponse && tokenResponse.access_token) {
                        gapi.client.setToken(tokenResponse);
                        isGoogleAuthConnected = true;
                        gSheetsStatus.textContent = 'Status: Terhubung';
                        gSheetsStatus.classList.remove('text-red-500');
                        gSheetsStatus.classList.add('text-green-600');
                        connectGSheetsBtn.textContent = 'Terhubung';
                        connectGSheetsBtn.disabled = true;
                    }
                },
            });
            gisInited = true;
            checkGisGapiReady();
        }
        
        function checkGisGapiReady() {
            if (gapiInited && gisInited) {
                connectGSheetsBtn.disabled = false;
            }
        }
        
        connectGSheetsBtn.addEventListener('click', () => {
            const clientId = googleClientIdEl.value.trim();
            const apiKey = geminiApiKeyEl.value.trim();
            if(!apiKey) {
                 flashError(geminiApiKeyEl, "Kunci API Gemini wajib diisi untuk integrasi!");
                 return;
            }
            if(!clientId) {
                 flashError(googleClientIdEl, "Client ID Google wajib diisi!");
                 return;
            }
            
            // Re-initialize if keys change
            initializeGapiClient();
            gisLoaded();

            if (tokenClient) {
                tokenClient.requestAccessToken({ prompt: 'consent' });
            }
        });


        async function saveToGoogleSheets(spreadsheetId, rowData) {
            if (!isGoogleAuthConnected) {
                console.log("Not connected to Google Sheets.");
                gSheetsStatus.textContent = 'Status: Otorisasi diperlukan.';
                return;
            }
            gSheetsStatus.textContent = 'Status: Menyimpan ke Sheet...';
             gSheetsStatus.classList.remove('text-red-500');
            gSheetsStatus.classList.add('text-slate-500');

            try {
                const params = {
                    spreadsheetId: spreadsheetId,
                    range: 'Sheet1', // Ganti jika nama sheet Anda berbeda
                    valueInputOption: 'USER_ENTERED',
                    insertDataOption: 'INSERT_ROWS',
                };
                const valueRangeBody = {
                    'values': [rowData]
                };

                const request = gapi.client.sheets.spreadsheets.values.append(params, valueRangeBody);
                await request;
                gSheetsStatus.textContent = 'Status: Berhasil disimpan!';
                gSheetsStatus.classList.remove('text-slate-500');
                gSheetsStatus.classList.add('text-green-600');
                 setTimeout(() => { 
                    gSheetsStatus.textContent = 'Status: Terhubung';
                 }, 3000);

            } catch (err) {
                console.error("Error saving to Google Sheets:", err);
                gSheetsStatus.textContent = `Status: Gagal menyimpan. Error: ${err.result.error.message}`;
                gSheetsStatus.classList.remove('text-slate-500');
                gSheetsStatus.classList.add('text-red-500');
            }
        }


        // Original prompt elements
        const outputIdEl = document.getElementById('prompt-output-id');
        const copyIdBtn = document.getElementById('copy-btn-id');
        const outputEnEl = document.getElementById('prompt-output-en');
        const copyEnBtn = document.getElementById('copy-btn-en');
        
        // Tab and Panel elements
        const allTabBtns = document.querySelectorAll('.tab-btn');
        const allTabPanels = document.querySelectorAll('.tab-panel');
        const tabs = {
            original: { btn: document.getElementById('tab-original'), panel: document.getElementById('panel-original') },
            optimized: { 
                btn: document.getElementById('tab-optimized'), 
                panel: document.getElementById('panel-optimized'),
                outputIdEl: document.getElementById('optimized-output-id'),
                outputEnEl: document.getElementById('optimized-output-en'),
                copyIdBtn: document.getElementById('copy-optimized-btn-id'),
                copyEnBtn: document.getElementById('copy-optimized-btn-en'),
                contentEl: document.getElementById('optimized-content-hashtag'),
                copyContentBtn: document.getElementById('copy-optimized-content-btn')
            },
            suggestion: { 
                btn: document.getElementById('tab-suggestion'), 
                panel: document.getElementById('panel-suggestion'),
                outputIdEl: document.getElementById('creative-suggestion-id'),
                outputEnEl: document.getElementById('creative-suggestion-en'),
                copyIdBtn: document.getElementById('copy-creative-suggestion-id'),
                copyEnBtn: document.getElementById('copy-creative-suggestion-en')
            },
            final: { 
                btn: document.getElementById('tab-final'), 
                panel: document.getElementById('panel-final'),
                outputIdEl: document.getElementById('final-prompt-id'),
                outputEnEl: document.getElementById('final-prompt-en'),
                copyIdBtn: document.getElementById('copy-final-prompt-id'),
                copyEnBtn: document.getElementById('copy-final-prompt-en'),
                contentEl: document.getElementById('final-content-hashtag'),
                copyContentBtn: document.getElementById('copy-final-content-btn')
            }
        };
        
        function createCharacterBlock() {
            characterCount++;
            const characterBlock = document.createElement('div');
            characterBlock.className = 'character-block border-t border-emerald-300 pt-4 mt-4';
            characterBlock.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <h4 class="font-semibold text-emerald-700">Karakter ${characterCount}</h4>
                    ${characterCount > 1 ? '<button class="remove-character-btn text-xs bg-red-100 text-red-600 hover:bg-red-200 px-2 py-1 rounded">Hapus</button>' : ''}
                </div>
                <div class="space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-5">
                        <div>
                            <label for="char-gender-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Jenis Kelamin</label>
                            <select id="char-gender-${characterCount}" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 custom-select char-gender">
                                <option value="">-- Pilih --</option>
                                <option value="pria">Pria</option>
                                <option value="wanita">Wanita</option>
                            </select>
                        </div>
                        <div>
                            <label for="char-nationality-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Kewarganegaraan</label>
                            <input id="char-nationality-${characterCount}" type="text" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 char-nationality" placeholder="Contoh: Indonesia">
                        </div>
                        <div>
                            <label for="char-age-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Usia</label>
                            <input id="char-age-${characterCount}" type="text" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 char-age" placeholder="Contoh: 25 tahun">
                        </div>
                    </div>
                    <div>
                        <label for="char-features-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Ciri Fisik Utama</label>
                        <input id="char-features-${characterCount}" type="text" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 char-features" placeholder="Contoh: rambut biru, mata bersinar">
                    </div>
                    <div>
                        <label for="char-clothing-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Pakaian & Aksesori</label>
                        <input id="char-clothing-${characterCount}" type="text" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 char-clothing" placeholder="Contoh: jaket kulit hitam, kacamata cyberpunk">
                    </div>
                    <div>
                        <label for="char-action-${characterCount}" class="block text-sm font-medium mb-2 text-emerald-600">Aksi Utama</label>
                        <input id="char-action-${characterCount}" type="text" class="form-field w-full border-2 rounded-lg py-2 px-4 placeholder-slate-400 focus:outline-none focus:ring-2 transition-all duration-300 bg-white border-emerald-300 text-emerald-900 focus:ring-emerald-500/50 focus:border-emerald-500 char-action" placeholder="Contoh: membaca buku kuno, melihat ke kejauhan">
                    </div>
                </div>
            `;
            characterContainer.appendChild(characterBlock);
            if (characterCount > 1) {
                characterBlock.querySelector('.remove-character-btn').addEventListener('click', () => {
                    characterBlock.remove();
                });
            }
        }
        
        function switchTab(targetTabId) {
            allTabBtns.forEach(btn => {
                const isTarget = btn.id === `tab-${targetTabId}`;
                btn.classList.toggle('border-teal-500', isTarget);
                btn.classList.toggle('text-teal-600', isTarget);
                btn.classList.toggle('border-transparent', !isTarget);
                btn.classList.toggle('text-slate-500', !isTarget);
                btn.classList.toggle('hover:text-slate-700', !isTarget);
                btn.classList.toggle('hover:border-slate-300', !isTarget);
            });
            allTabPanels.forEach(panel => {
                panel.classList.toggle('hidden', panel.id !== `panel-${targetTabId}`);
            });
        }

        function toggleActionButtonsVisibility() {
            const isAnyFieldFilled = formFields.some(field => field.value.trim() !== '');
            clearBtn.classList.toggle('hidden', !isAnyFieldFilled);
            
            const isResultVisible = !resultsContainer.classList.contains('hidden');
            optimizeBtn.classList.toggle('hidden', !isResultVisible);
        }
        
        async function callGeminiAPI(prompt, apiKey, jsonSchema = null) {
             let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
             const payload = { 
                contents: chatHistory,
                generationConfig: {}
             };

             if (jsonSchema) {
                 payload.generationConfig.responseMimeType = "application/json";
                 payload.generationConfig.responseSchema = jsonSchema;
             }
             
             const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
             
             const response = await fetch(apiUrl, {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(payload)
             });

             if (!response.ok) {
                 const errorBody = await response.json();
                 console.error("API Error Response:", errorBody);
                 throw new Error(`HTTP error! status: ${response.status}`);
             }

             const result = await response.json();
             
             if (result.candidates && result.candidates.length > 0 &&
                 result.candidates[0].content && result.candidates[0].content.parts &&
                 result.candidates[0].content.parts.length > 0) {
                 const responseText = result.candidates[0].content.parts[0].text;
                 return jsonSchema ? JSON.parse(responseText) : responseText.trim();
             } else {
                 console.error("Struktur respons tidak terduga:", result);
                 throw new Error("Gagal mendapatkan konten dari respons API.");
             }
        }
        
        function flashError(element, message) {
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            if (element.tagName === 'P') {
                element.classList.remove('hidden');
                setTimeout(() => {
                    element.classList.add('hidden');
                }, 3000);
            } else {
                const originalPlaceholder = element.placeholder;
                element.placeholder = message;
                element.classList.add('border-red-500', 'focus:ring-red-500/50');
                setTimeout(() => {
                    element.placeholder = originalPlaceholder;
                    element.classList.remove('border-red-500', 'focus:ring-red-500/50');
                }, 3000);
            }
        }

        async function handleIdeation() {
            const userApiKey = geminiApiKeyEl.value.trim();
            if (!userApiKey) {
                flashError(geminiApiKeyEl, "Kunci API wajib diisi!");
                return;
            }

            const ideateIcon = document.getElementById('ideate-icon');
            const ideateLoader = document.getElementById('ideate-loader');
            const ideateBtnText = document.getElementById('ideate-btn-text');
            const initialDescription = overallDescEl.value.trim();

            if (!initialDescription) {
                flashError(overallDescEl, "Tulis ide awal Anda di sini terlebih dahulu!");
                return;
            }

            const prompt = `Kembangkan deskripsi foto ini menjadi satu kalimat yang lebih puitis, imajinatif, dan sinematik: "${initialDescription}". Hanya berikan kalimat deskripsinya saja tanpa tambahan apapun.`;
            
            ideateBtn.disabled = true;
            ideateIcon.style.display = 'none';
            ideateBtnText.style.display = 'none';
            ideateLoader.classList.remove('hidden');

            try {
                const optimizedText = await callGeminiAPI(prompt, userApiKey);
                overallDescEl.value = optimizedText;
            } catch (error) {
                console.error("Error during API call:", error);
                flashError(overallDescEl, "Terjadi kesalahan. Periksa koneksi atau coba lagi nanti.");
            } finally {
                ideateBtn.disabled = false;
                ideateIcon.style.display = 'inline';
                ideateBtnText.style.display = 'inline';
                ideateLoader.classList.add('hidden');
            }
        }

        async function handleOptimization() {
            const userApiKey = geminiApiKeyEl.value.trim();
            if (!userApiKey) {
                flashError(apiKeyError, "Kunci API wajib diisi untuk optimasi!");
                return;
            }
            apiKeyError.classList.add('hidden');

            const optimizeBtnText = document.getElementById('optimize-btn-text');
            const optimizeIcon = document.getElementById('optimize-icon');
            const optimizeLoader = document.getElementById('optimize-loader');
            const originalPromptEn = outputEnEl.value;

            if (!originalPromptEn.trim()) return;

            optimizeBtn.disabled = true;
            optimizeBtnText.style.display = 'none';
            optimizeIcon.style.display = 'none';
            optimizeLoader.classList.remove('hidden');
            
            try {
                // First API Call: Get optimization, suggestion, and content
                const optimizationPrompt = `
                    Analisis prompt gambar berikut dan lakukan tugas-tugas ini:
                    1. Optimalkan prompt agar lebih deskriptif, detail, dan puitis untuk AI text-to-image seperti Midjourney (dalam Bahasa Inggris).
                    2. Terjemahkan prompt yang telah dioptimalkan ke dalam Bahasa Indonesia yang alami dan deskriptif.
                    3. Berikan satu saran kreatif yang singkat untuk membuat prompt lebih unik (seperti elemen tak terduga, mood, atau detail artistik) untuk membuatnya lebih menarik (dalam Bahasa Inggris).
                    4. Terjemahkan saran kreatif tersebut ke dalam Bahasa Indonesia.
                    5. Berdasarkan prompt yang telah dioptimalkan, buatlah caption media sosial yang menarik dan daftar hashtag yang relevan (dalam Bahasa Indonesia). Gabungkan caption dan hashtag ke dalam satu string teks. caption tidak menggunakan icon atau emotion, gunakan huruf kecil untuk setiap hastag, hastag menggunakan baris yang berbeda dengan isi body konten.
                    
                    Prompt Asli: "${originalPromptEn}"
                    
                    Kembalikan hasilnya HANYA dalam format JSON berikut. Jangan tambahkan teks atau penjelasan lain.
                `;
                const optimizationSchema = {
                  "type": "OBJECT",
                  "properties": {
                    "optimized_en": { "type": "STRING" },
                    "optimized_id": { "type": "STRING" },
                    "suggestion_en": { "type": "STRING" },
                    "suggestion_id": { "type": "STRING" },
                    "content_and_hashtag_id": { "type": "STRING" }
                  },
                   "required": ["optimized_en", "optimized_id", "suggestion_en", "suggestion_id", "content_and_hashtag_id"]
                };
                const optimizationResult = await callGeminiAPI(optimizationPrompt, userApiKey, optimizationSchema);

                tabs.optimized.outputEnEl.value = optimizationResult.optimized_en;
                tabs.optimized.outputIdEl.value = optimizationResult.optimized_id;
                tabs.optimized.contentEl.value = optimizationResult.content_and_hashtag_id;
                tabs.suggestion.outputEnEl.value = optimizationResult.suggestion_en;
                tabs.suggestion.outputIdEl.value = optimizationResult.suggestion_id;

                // Second API Call: Generate the final prompt and its content
                const finalPromptGenPrompt = `
                    Berdasarkan prompt yang telah dioptimalkan dan saran kreatif berikut, lakukan tugas-tugas ini:
                    1. Buat prompt final yang terpadu dan kohesif untuk generator gambar AI, dengan mengintegrasikan saran ke dalam deskripsi utama (dalam Bahasa Inggris).
                    2. Terjemahkan prompt final gabungan ini ke dalam Bahasa Indonesia yang alami dan deskriptif.
                    3. Berdasarkan prompt final tersebut, buatlah caption media sosial baru yang menarik dan daftar hashtag yang relevan (dalam Bahasa Indonesia). Gabungkan caption dan hashtag ke dalam satu string teks. caption tidak menggunakan icon atau emotion, gunakan huruf kecil untuk setiap hastag, hastag menggunakan baris yang berbeda dengan isi body konten.

                    Prompt Optimal: "${optimizationResult.optimized_en}"
                    Saran Kreatif: "${optimizationResult.suggestion_en}"

                    Kembalikan hasilnya HANYA dalam format JSON berikut. Jangan tambahkan teks atau penjelasan lain.
                `;
                const finalPromptSchema = {
                  "type": "OBJECT",
                  "properties": {
                    "final_prompt_en": { "type": "STRING" },
                    "final_prompt_id": { "type": "STRING" },
                    "content_and_hashtag_id": { "type": "STRING" }
                  },
                   "required": ["final_prompt_en", "final_prompt_id", "content_and_hashtag_id"]
                };
                const finalPromptResult = await callGeminiAPI(finalPromptGenPrompt, userApiKey, finalPromptSchema);

                tabs.final.outputEnEl.value = finalPromptResult.final_prompt_en;
                tabs.final.outputIdEl.value = finalPromptResult.final_prompt_id;
                tabs.final.contentEl.value = finalPromptResult.content_and_hashtag_id;

                // Update UI
                tabs.optimized.btn.classList.remove('hidden');
                tabs.suggestion.btn.classList.remove('hidden');
                tabs.final.btn.classList.remove('hidden');
                switchTab('final');

                // Save to Google Sheets if connected
                const spreadsheetUrl = spreadsheetUrlEl.value.trim();
                if(isGoogleAuthConnected && spreadsheetUrl) {
                    const spreadsheetIdMatch = spreadsheetUrl.match(/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);
                    if (spreadsheetIdMatch && spreadsheetIdMatch[1]) {
                        const spreadsheetId = spreadsheetIdMatch[1];
                        const rowData = [
                            new Date().toISOString(),
                            finalPromptResult.final_prompt_id,
                            finalPromptResult.final_prompt_en,
                            finalPromptResult.content_and_hashtag_id
                        ];
                        await saveToGoogleSheets(spreadsheetId, rowData);
                    } else {
                        gSheetsStatus.textContent = 'Status: URL Google Sheet tidak valid.';
                        gSheetsStatus.classList.add('text-red-500');
                    }
                }

            } catch (error) {
                 console.error("Error during optimization:", error);
                 flashError(apiKeyError, 'Gagal mengoptimalkan. Cek Kunci API Anda.');
            } finally {
                optimizeBtn.disabled = false;
                optimizeBtnText.style.display = 'inline';
                optimizeIcon.style.display = 'inline';
                optimizeLoader.classList.add('hidden');
            }
        }

        async function generatePrompt() {
            const userApiKey = geminiApiKeyEl.value.trim();
            if (!userApiKey) {
                flashError(geminiApiKeyEl, "Kunci API wajib diisi untuk menerjemahkan!");
                return;
            }
            apiKeyError.classList.add('hidden');

            const overallDesc = overallDescEl.value.trim();
            if (!overallDesc) {
                flashError(overallDescEl, "Latar belakang wajib diisi!");
                return;
            }

            const characterBlocks = document.querySelectorAll('.character-block');
            let charactersID = [];
            
            characterBlocks.forEach(block => {
                const charFields = {
                    nationality: block.querySelector('.char-nationality').value.trim(),
                    age: block.querySelector('.char-age').value.trim(),
                    gender: block.querySelector('.char-gender').value.trim(),
                    features: block.querySelector('.char-features').value.trim(),
                    clothing: block.querySelector('.char-clothing').value.trim(),
                    action: block.querySelector('.char-action').value.trim(),
                };
                if (Object.values(charFields).some(field => field !== '')) {
                    let subjectID = `seorang karakter ${charFields.gender || ''} ${charFields.nationality || ''} ${charFields.age || ''}`.replace(/\s+/g, ' ').trim();
                    let details_id = [];
                    if(charFields.features) details_id.push(`dengan ${charFields.features}`);
                    if(charFields.clothing) details_id.push(`mengenakan ${charFields.clothing}`);
                    if(charFields.action) details_id.push(`sedang ${charFields.action}`);
                    if(details_id.length > 0) subjectID += `, ${details_id.join(', ')}`;
                    charactersID.push(subjectID);
                }
            });
            
            const sceneText = document.getElementById('scene').value.trim();
            let mainSubjectID = charactersID.join(' dan ');

            if (sceneText) {
                if (mainSubjectID) mainSubjectID = `${sceneText} ${mainSubjectID}`; else mainSubjectID = sceneText;
            }
            
            const finalSubjectID = overallDesc ? `${overallDesc}. ${mainSubjectID}` : mainSubjectID;

            const promptPartsID_desc = [finalSubjectID].filter(Boolean);

            const detailsText = document.getElementById('details').value.trim();
            if (detailsText) {
                promptPartsID_desc.push(detailsText);
            }

            document.querySelectorAll('#style, #lighting, #shot-style, #camera-angle, #focus, #camera').forEach(el => {
                if (el.options && el.selectedIndex > 0) {
                    const selectedText = el.options[el.selectedIndex].value;
                    promptPartsID_desc.push(selectedText);
                }
            });

            let finalIdPrompt = promptPartsID_desc.join(', ');
            outputIdEl.value = finalIdPrompt;
            
            generateBtn.disabled = true;
            generateBtn.textContent = 'Menerjemahkan...';

            try {
                const translationPrompt = `Translate the following descriptive photo prompt to English. The translation should be natural and suitable for an AI image generator. Only return the translated prompt. Original: "${finalIdPrompt}"`;
                let finalEnPrompt = await callGeminiAPI(translationPrompt, userApiKey);
                const resolution = document.getElementById('resolution').value;
                if(resolution) {
                    finalEnPrompt += `, ${resolution}`;
                }
                outputEnEl.value = finalEnPrompt;

                resultsContainer.classList.remove('hidden');
                resultsContainer.classList.add('animate-fade-in');
                tabs.optimized.btn.classList.add('hidden');
                tabs.suggestion.btn.classList.add('hidden');
                tabs.final.btn.classList.add('hidden');
                switchTab('original');

            } catch (error) {
                console.error("Translation Error:", error);
                outputEnEl.value = "Gagal menerjemahkan. Silakan periksa Kunci API Anda.";
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'Buat Prompt!';
                toggleActionButtonsVisibility();
            }
        }
        
        function clearFields() {
            characterContainer.innerHTML = '';
            createCharacterBlock();
            formFields.forEach(field => { 
                if(!field.closest('.character-block')) field.value = ''; 
            });
            outputIdEl.value = '';
            outputEnEl.value = '';
            // Clear all other textareas
            Object.values(tabs).forEach(tab => {
                if(tab.outputIdEl) tab.outputIdEl.value = '';
                if(tab.outputEnEl) tab.outputEnEl.value = '';
                if(tab.contentEl) tab.contentEl.value = '';
            });
            resultsContainer.classList.add('hidden');
            toggleActionButtonsVisibility();
        }

        function copyToClipboard(outputElement, buttonElement) {
            if(!outputElement.value) return;
            outputElement.select();
            outputElement.setSelectionRange(0, 99999); 
            try {
                document.execCommand('copy');
                buttonElement.textContent = 'Disalin!';
                setTimeout(() => { buttonElement.textContent = 'Salin'; }, 2000);
            } catch (err) {
                console.error('Gagal menyalin teks: ', err);
                buttonElement.textContent = 'Gagal';
                setTimeout(() => { buttonElement.textContent = 'Salin'; }, 2000);
            }
        }

        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', () => {
            createCharacterBlock(); // Create the first character block on page load
            connectGSheetsBtn.disabled = true;
            
            addCharacterBtn.addEventListener('click', createCharacterBlock);
            ideateBtn.addEventListener('click', handleIdeation);
            generateBtn.addEventListener('click', generatePrompt);
            clearBtn.addEventListener('click', clearFields);
            optimizeBtn.addEventListener('click', handleOptimization);

            // Setup copy buttons
            copyIdBtn.addEventListener('click', () => copyToClipboard(outputIdEl, copyIdBtn));
            copyEnBtn.addEventListener('click', () => copyToClipboard(outputEnEl, copyEnBtn));
            Object.values(tabs).forEach(tab => {
                if (tab.copyIdBtn) {
                    tab.copyIdBtn.addEventListener('click', () => copyToClipboard(tab.outputIdEl, tab.copyIdBtn));
                }
                if (tab.copyEnBtn) {
                    tab.copyEnBtn.addEventListener('click', () => copyToClipboard(tab.outputEnEl, tab.copyEnBtn));
                }
                if (tab.copyContentBtn) {
                    tab.copyContentBtn.addEventListener('click', () => copyToClipboard(tab.contentEl, tab.copyContentBtn));
                }
            });
            
            // Setup tab switching
            allTabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetTabId = btn.id.replace('tab-', '');
                    switchTab(targetTabId);
                });
            });

            document.addEventListener('input', (e) => {
                if (e.target.classList.contains('form-field')) {
                    toggleActionButtonsVisibility();
                }
            });
            
            document.getElementById('copyright-year').textContent = new Date().getFullYear();
            toggleActionButtonsVisibility();
        });
    </script>
</body>
</html>
